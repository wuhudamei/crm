webpackJsonp([5],{14:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(172),n=[i(173)],s=[i(187),i(188)];t.default=a.createStore(n,s)},15:function(e,t,i){i(183),i(186).shim()},194:function(e,t){},24:function(e,t,i){var a=i(4)(i(26),i(29),null,null,null);e.exports=a.exports},25:function(e,t,i){var a=i(4)(i(34),i(38),null,null,null);e.exports=a.exports},26:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(14);t.default={name:"footer",props:{active:{type:Number,default:0}},data:function(){return{items:[{name:"groups",text:"我的客户"},{name:"schedule",text:"日程"},{name:"upstage",text:"我的"}],activeIndex:null}},methods:{handleClick:function(e){this.activeIndex=e;var t="appindex.html";t=1===this.activeIndex?"calendar.html":2===this.activeIndex?"my.html":"appindex.html#/tab/0",a.default.remove("indextab"),this.$emit("footer-click",e),window.location.href=t}},created:function(){this.activeIndex=this.active}}},27:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{show:{type:Boolean,required:!1,default:function(){return!1}}}}},28:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"loading"},[i("p",[i("img",{attrs:{src:"/static/img/loading.gif"}}),e._v(" "),i("br"),e._v(" "),e._t("default",[e._v("正在加载，请稍后...")])],2)])},staticRenderFns:[]}},29:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",[i("div",{staticClass:"row foot-nav"},e._l(e.items,function(t,a){return i("div",{staticClass:"col-xs-4 foot-list"},[i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.handleClick(a)}}},[i("span",{class:[t.name,a===e.activeIndex?"on":""]}),i("br"),e._v("\n            "+e._s(t.text)+"\n            ")])])}))])},staticRenderFns:[]}},34:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"header",data:function(){return{}}}},38:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",[i("h3",[e._t("default")],2)])},staticRenderFns:[]}},394:function(e,t,i){function a(e){i(745)}var n=i(4)(i(445),i(818),a,null,null);e.exports=n.exports},416:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(17),n=i(394),s=i.n(n);a.a.config.productionTip=!1,new a.a({el:"#app",template:"<Calendar/>",components:{Calendar:s.a}})},423:function(e,t,i){"use strict";function a(e){try{var t=e.target,i=t.nodeName.toLowerCase(),a=t.className.indexOf("state-item");if("div"===i&&-1!==a){if(-1!==t.className.indexOf("_select"))return console.log("returned"),!1;var n=this.$refs.swiper.querySelector("._select");if(n&&(n.className=n.className.replace("_select","").trim()),t){t.className+=" _select";var s=new Date(t.dataset.time);this.$emit("update:selectedDate",new Date(s))}e.stopPropagation&&e.stopPropagation()}}catch(e){console.log(e)}}function n(e){e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0});var s=i(774),r=i.n(s),c=i(48);i.n(c);i(742),t.default={data:function(){return{showSwiper:!0,currDate:null,fragment:"",swiper:null}},props:{hours:{type:Array,required:!1,default:function(){return new Array(24)}},selectedDate:{type:Date,required:!0},autoSelect:{type:Boolean,required:!1,default:function(){return!0}}},created:function(){this.currDate=new Date(this.selectedDate.getTime())},mounted:function(){this.$nextTick(function(){var e=new Date,t=e.getDay(),a=new Date(e.getTime()-i.i(c.dayToMilliseconds)(t)),n=new Date(a.getTime()-i.i(c.dayToMilliseconds)(7)),s=new Date(a.getTime()+i.i(c.dayToMilliseconds)(7)),r="";r+=this.generateWeek(n,!0),r+=this.generateWeek(a,!0),r+=this.generateWeek(s,!0),this.$refs.swiperWrapper.innerHTML=r,this.activeSwiper()})},beforeDestroy:function(){this.swiper.destroy()},methods:{todayClickHandler:function(e){this.$emit("update:selectedDate",new Date),this.currDate=new Date,this.showSwiper=!1,this.$nextTick(function(){var e=new Date,t=e.getDay(),n=new Date(e.getTime()-i.i(c.dayToMilliseconds)(t)),s=new Date(n.getTime()-i.i(c.dayToMilliseconds)(7)),r=new Date(n.getTime()+i.i(c.dayToMilliseconds)(7)),l="";l+=this.generateWeek(s,!0),l+=this.generateWeek(n,!0),l+=this.generateWeek(r,!0),this.showSwiper=!1,this.showSwiper=!0,this.$nextTick(function(){this.$refs.swiper.removeEventListener("click",a,!1),this.swiper.destroy(),this.$refs.swiperWrapper.innerHTML=l,this.activeSwiper()})})},eventClickHandler:function(e,t){this.$emit("calendarEventClick",e,t)},generateWeek:function(e){var t="";t+='<div class="day-slider swiper-slide"><div class="slider-item">';for(var a=0;a<=6;a++){var n=new Date(e.getTime()+i.i(c.dayToMilliseconds)(a));t+='\n        <div class="day-item">\n          <div data-time="'+i.i(c.dateYYYYMMDDFormat)(n)+'" class="state-item\n            '+(i.i(c.isToday)(n)?"_today":"")+"\n            "+(i.i(c.isSelectedDate)(n,this.selectedDate)?"_select":"")+"\n            "+(i.i(c.isWeekEnd)(a)?"_state-weekend":"")+'">'+n.getDate()+"</div>\n        </div>\n      "}return t+="</div></div>"},activeSwiper:function(){var e=this;e.swiper=new r.a(this.$refs.swiper,{initialSlide:1,speed:500,onSlideChangeStart:function(e){e.disableTouchControl(),e.lockSwipes(),console.log(e.activeIndex,"start"),document.addEventListener("touchmove",n)},onSlideChangeEnd:function(t){console.log(t.activeIndex,"end"),0===t.activeIndex?(e.setCurrDate(t.activeIndex),e.leftSlideHandle()):2===t.activeIndex&&(e.setCurrDate(t.activeIndex),e.rightSlideHandle()),t.unlockSwipes(),t.enableTouchControl(),document.removeEventListener("touchmove",n)}}),e.$refs.swiper.addEventListener("click",a.bind(e),!1)},setCurrDate:function(e){try{switch(e){case 0:this.currDate=new Date(this.currDate.getTime()-i.i(c.dayToMilliseconds)(7)),this.autoSelect&&this.$emit("update:selectedDate",new Date(this.selectedDate.getTime()-i.i(c.dayToMilliseconds)(7)));break;case 2:this.currDate=new Date(this.currDate.getTime()+i.i(c.dayToMilliseconds)(7)),this.autoSelect&&this.$emit("update:selectedDate",new Date(this.selectedDate.getTime()+i.i(c.dayToMilliseconds)(7)))}this.autoSelect&&this.$nextTick(function(){var e=this.$refs.swiper.querySelector("._select");e&&(e.className=e.className.replace("_select","").trim());var t=this.$refs.swiper.querySelector('[data-time="'+i.i(c.dateYYYYMMDDFormat)(this.currDate)+'"]');t&&(t.className+=" _select")})}catch(t){console.log(t,e)}},rightSlideHandle:function(){try{var e=this;e.swiper.removeSlide(0);var t=6-this.currDate.getDay()+1,a=e.generateWeek(new Date(this.currDate.getTime()+i.i(c.dayToMilliseconds)(t)));e.swiper.appendSlide(a),e.swiper.setWrapperTranslate(-1*e.$refs.swiper.clientWidth),e.swiper.slideTo(1,0)}catch(e){console.log(e,"rightslide")}},leftSlideHandle:function(){try{var e=this,t=this.currDate.getDay()+7,a=e.generateWeek(new Date(this.currDate.getTime()-i.i(c.dayToMilliseconds)(t)));e.swiper.prependSlide(a),e.swiper.setWrapperTranslate(-1*e.$refs.swiper.clientWidth),e.swiper.slideTo(1,0),e.swiper.removeSlide(3)}catch(e){console.log(e,"leftslide")}}},watch:{},computed:{selectedMonth:function(){return this.currDate.getMonth()+1},selectedYear:function(){return this.currDate.getFullYear()}}}},445:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(6),n=i.n(a),s=i(788),r=i.n(s),c=i(9),l=i.n(c),o=i(24),d=i.n(o),u=i(25),h=i.n(u),v=i(48);i.n(v);i(15),t.default={data:function(){return{hours:new Array(24),selectedDate:new Date,loadingShow:!1}},created:function(){for(var e=0;e<this.hours.length;e++)this.hours[e]={name:e};this.fetchEventsByDay(i.i(v.dateYYYYMMDDFormat)(this.selectedDate))},components:{Calendar:r.a,Loading:l.a,FooterComponent:d.a,HeaderComponent:h.a},methods:{calendarEventClick:function(e,t){window.location.href="approve.html#/schedule?date="+i.i(v.dateYYYYMMDDFormat)(this.selectedDate)},addSchedule:function(){window.location.href="approve.html#/addchedule"},fetchEventsByDay:function(e){var t=this;t.loadingShow=!0,n.a.get("/api/schedule/search",{params:{date:e}}).then(function(e){"1"===e.data.code&&(t.hours=e.data.data)}).finally(function(){t.loadingShow=!1})}},watch:{selectedDate:function(e){console.log(e),this.loadingShow=!0,this.hours=new Array(24);for(var t=0;t<this.hours.length;t++)this.hours[t]={name:t};this.fetchEventsByDay(i.i(v.dateYYYYMMDDFormat)(e))}}}},48:function(e,t){function i(e){return 0===e||6===e}function a(e){var t=new Date;return t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()==e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()}function n(e){return 24*e*60*60*1e3}function s(e,t){return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()==t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()}function r(e){return e>=10?e:"0"+e}function c(e){return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())}function l(e){return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+" "+r(e.getHours())+":"+r(e.getMinutes())}e.exports={isWeekEnd:i,isToday:a,dayToMilliseconds:n,isSelectedDate:s,dateYYYYMMDDFormat:c,dateYYYYMMDDHHMMFormat:l}},742:function(e,t){},745:function(e,t){},747:function(e,t){},788:function(e,t,i){function a(e){i(747)}var n=i(4)(i(423),i(822),a,null,null);e.exports=n.exports},818:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"calendar-test-wrapper wrap"},[i("Calendar",{attrs:{hours:e.hours,selectedDate:e.selectedDate,autoSelect:!1},on:{"update:selectedDate":function(t){e.selectedDate=t},calendarEventClick:e.calendarEventClick}},[i("ul",{staticClass:"mine-tab",staticStyle:{margin:"10px 5px"}},[i("button",{staticClass:"btn btn-default border-none",staticStyle:{height:"30px",margin:"0 3px"},attrs:{type:"button","aria-label":"Left Align"},on:{click:e.addSchedule}},[i("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}})]),e._v(" "),i("li",{staticClass:"active"},[i("a",{attrs:{href:"javascript:;"}},[e._v("日程")])]),e._v(" "),i("li",[i("a",{attrs:{href:"approve.html"}},[e._v("待审批")])])])]),e._v(" "),i("Footer-component",{attrs:{active:1}}),e._v(" "),i("Loading",{attrs:{show:e.loadingShow}})],1)},staticRenderFns:[]}},822:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper calendar-wrapper"},[e._t("default"),e._v(" "),i("div",{staticClass:"calendar-header"},[i("div",{staticClass:"date-box"},[i("div",{staticClass:"item item-years"},[i("span",{staticClass:"month"},[e._v(e._s(e.selectedMonth)+"月")]),e._v(e._s(e.selectedYear)+"\n      ")]),e._v(" "),i("div",{staticClass:"item item-today",on:{click:e.todayClickHandler}},[e._v("\n        今天\n      ")])]),e._v(" "),e._m(0),e._v(" "),e.showSwiper?i("div",{ref:"swiper",staticClass:"swiper-container"},[i("div",{ref:"swiperWrapper",staticClass:"swiper-wrapper"})]):e._e()]),e._v(" "),i("div",{staticClass:"calendar-content"},[e._l(e.hours,function(t,a){return i("div",{staticClass:"time-line"},[i("div",{staticClass:"time"},[e._v(e._s(t.hour))]),e._v(" "),i("div",{staticClass:"note",class:{_active:t.events&&t.events.length>0}},[t.events?e._l(t.events,function(a){return i("div",{staticClass:"item _ellipsis",on:{click:function(i){e.eventClickHandler(a,t)}}},[e._v("\n            "+e._s(a.title)+"\n          ")])}):e._e()],2)])}),e._v(" "),e._m(1)],2)],2)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"week"},[i("div",{staticClass:"item _state-weekend"},[e._v("日")]),e._v(" "),i("div",{staticClass:"item"},[e._v("一")]),e._v(" "),i("div",{staticClass:"item"},[e._v("二")]),e._v(" "),i("div",{staticClass:"item"},[e._v("三")]),e._v(" "),i("div",{staticClass:"item"},[e._v("四")]),e._v(" "),i("div",{staticClass:"item"},[e._v("五")]),e._v(" "),i("div",{staticClass:"item _state-weekend"},[e._v("六")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"time-line"},[i("div",{staticClass:"time"},[e._v("24")]),e._v(" "),i("div",{staticClass:"note"})])}]}},9:function(e,t,i){var a=i(4)(i(27),i(28),null,null,null);e.exports=a.exports}},[416]);
//# sourceMappingURL=calendar.58133be52d18a0b3c2d6.js.map